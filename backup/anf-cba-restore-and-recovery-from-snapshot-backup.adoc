---
sidebar: sidebar 
permalink: backup/anf-cba-restore-and-recovery-from-snapshot-backup.html 
keywords: restore, recovery, operation, system database 
summary: 이 섹션에서는 스냅샷 백업에서 복원 및 복구를 수행하는 방법에 대해 설명합니다. 
---
= Snapshot 백업으로부터 복원 및 복구
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


link:anf-cba-snapshot-based-backup-operations-of-global-non-data-volumes.html["이전: 글로벌 비 데이터 볼륨의 스냅샷 기반 백업 작업"]

[role="lead"]
다음 섹션에서는 HANA MDC 단일 호스트, 단일 테넌트 시스템에 대한 복원 및 복구 워크플로우에 대해 설명합니다. 다중 호스트 시스템의 차이점이 강조 표시됩니다. 이 예에서는 수동 복구를 실행하는 도구로 SAP HANA Studio를 보여 줍니다. 복구 작업에 SAP HANA Cockpit 또는 HANA SQL 문을 사용할 수도 있습니다.

SAP HANA Studio 및 Cloud Backup for Applications를 사용하여 SAP HANA MDC 단일 테넌트 시스템을 복원 및 복구하려면 다음 단계를 수행하십시오.

. SAP HANA Studio를 사용하여 복원 및 복구 프로세스 준비:
+
.. Recover System Database * 를 선택하고 SAP HANA 시스템의 종료를 확인합니다.
.. 복구 유형 및 로그 백업 위치를 선택합니다.
+
데이터 백업 목록이 표시됩니다.

.. 외부 백업 ID를 보려면 관련 백업을 선택합니다.


. HANA 데이터 볼륨을 마운트 해제합니다.
. Cloud Backup for Applications를 사용하여 복원 프로세스 수행:
+
.. 백업 보기에서 SAP HANA Studio의 외부 백업 ID 또는 설명 필드와 일치하는 백업을 선택합니다.
.. 복원 작업을 시작하려면 상황에 맞는 메뉴에서 * 복원 * 을 선택합니다.


. HANA 데이터 볼륨을 마운트합니다.
. SAP HANA Studio를 사용하여 시스템 데이터베이스에 대한 복구 프로세스 실행:
+
.. 백업 목록에서 * Refresh * (새로 고침 *)를 클릭하고 복구에 사용할 수 있는 백업을 선택합니다(녹색 아이콘으로 표시됨).
.. 복구 작업을 시작합니다.
+
복구 작업이 완료되면 시스템 데이터베이스가 시작됩니다.



. SAP HANA Studio를 사용하여 테넌트 데이터베이스에 대한 복구 프로세스 실행:
+
.. Recover Tenant Database * 를 선택하고 복구할 테넌트를 선택합니다.
.. 복구 유형 및 로그 백업 위치를 선택합니다.


. 데이터 백업 목록이 표시됩니다. 데이터 볼륨이 이미 복원되었기 때문에 테넌트 백업은 사용 가능으로 표시됩니다(녹색).
+
.. 백업을 선택하고 복구 프로세스를 시작합니다. 복구 프로세스가 완료되면 테넌트 데이터베이스가 자동으로 시작됩니다.




데이터 백업 목록이 표시됩니다. 데이터 볼륨이 이미 복원되었기 때문에 테넌트 백업은 사용 가능으로 표시됩니다(녹색). 백업을 선택하고 복구 프로세스를 시작합니다. 복구 프로세스가 완료되면 테넌트 데이터베이스가 자동으로 시작됩니다.

다음 단계에서는 HANA 시스템 PR1의 복원 및 복구 작업을 설명합니다.



== 복원 및 복구 작업을 준비합니다

. SAP HANA Studio에서 시스템 데이터베이스 복구를 시작하려면 * 백업 및 복구 * > * 시스템 데이터베이스 복구 * 로 이동합니다.
+
image:anf-cba-image79.png["완료 중인 단계의 스크린샷."]

+
image:anf-cba-image80.png["완료 중인 단계의 스크린샷."]

. 복구 유형을 선택하고 * 다음 * 을 클릭합니다.
+
image:anf-cba-image81.png["완료 중인 단계의 스크린샷."]

. 백업 카탈로그 위치를 입력하고 * Next * 를 클릭합니다.
+
image:anf-cba-image82.png["완료 중인 단계의 스크린샷."]

. 사용 가능한 백업 목록은 HANA 백업 카탈로그 콘텐츠를 기반으로 표시됩니다. 필요한 백업을 선택하고 외부 백업 ID(예: 가장 최근 백업)를 확인합니다.
+
image:anf-cba-image83.png["완료 중인 단계의 스크린샷."]

. 모든 데이터 볼륨을 마운트 해제합니다.
+
....
umount /hana/data/PR1/mnt00001
....
+

NOTE: SAP HANA 다중 호스트 시스템의 경우 각 호스트의 모든 데이터 볼륨을 마운트 해제해야 합니다.





== HANA 데이터베이스 복원

. 복원 작업을 시작하려면 백업 보기에서 HANA Studio에도 표시되는 백업을 선택하고 상황에 맞는 메뉴에서 복원 을 선택합니다.
+
image:anf-cba-image84.png["완료 중인 단계의 스크린샷."]

. 다음 단계에서는 복구 작업을 위한 사전 및 사후 스크립트를 제공할 수 있습니다.
+
image:anf-cba-image85.png["완료 중인 단계의 스크린샷."]

+
Cloud Backup for Applications 작업 로그에는 복구 작업의 진행률이 표시됩니다.

+
image:anf-cba-image86.png["완료 중인 단계의 스크린샷."]

. 복원 프로세스가 완료될 때까지 기다린 다음 데이터 볼륨을 마운트합니다.
+
....
mount /hana/data/SP1/mnt00001
....
+

NOTE: SAP HANA 다중 호스트 시스템의 경우 각 호스트에 모든 데이터 볼륨을 마운트해야 합니다.





== 시스템 데이터베이스를 복구합니다

. 사용 가능한 백업 목록을 업데이트하려면 SAP HANA Studio로 이동하여 새로 고침 을 클릭합니다. Cloud Backup for Applications를 사용하여 복구된 백업은 백업 목록에 녹색 아이콘과 함께 표시됩니다. 백업을 선택하고 다음 을 클릭합니다.
+
image:anf-cba-image87.png["완료 중인 단계의 스크린샷."]

. 로그 백업의 위치를 제공합니다. 다음 * 을 클릭합니다.
+
image:anf-cba-image88.png["완료 중인 단계의 스크린샷."]

. 필요에 따라 다른 설정을 선택합니다. Delta 백업 사용 이 선택되어 있지 않은지 확인합니다. 다음 * 을 클릭합니다.
+
image:anf-cba-image89.png["완료 중인 단계의 스크린샷."]

. 복구 설정을 검토하고 * Finish * 를 클릭합니다.
+
image:anf-cba-image90.png["완료 중인 단계의 스크린샷."]

. 복구 프로세스가 시작됩니다. 시스템 데이터베이스 복구가 완료될 때까지 기다립니다.
+
image:anf-cba-image91.png["완료 중인 단계의 스크린샷."]





== 테넌트 데이터베이스를 복구합니다

. SAP HANA Studio에서 시스템 데이터베이스의 항목을 선택하고 * Backup and Recovery * > * Recover Tenant Database * 로 이동합니다.
+
image:anf-cba-image92.png["완료 중인 단계의 스크린샷."]

. 복구할 테넌트를 선택하고 * 다음 * 을 클릭합니다.
+
image:anf-cba-image93.png["완료 중인 단계의 스크린샷."]

. 복구 유형을 지정하고 Next를 클릭합니다.
+
image:anf-cba-image94.png["완료 중인 단계의 스크린샷."]

. 백업 카탈로그 위치를 확인하고 * 다음 * 을 클릭합니다.
+
image:anf-cba-image95.png["완료 중인 단계의 스크린샷."]

. 테넌트 데이터베이스가 오프라인 상태인지 확인합니다. 계속하려면 확인을 클릭하십시오.
+
image:anf-cba-image96.png["완료 중인 단계의 스크린샷."]

+
시스템 데이터베이스 복구 전에 데이터 볼륨 복구가 수행되었으므로 테넌트 백업을 즉시 사용할 수 있습니다.

. 녹색으로 강조 표시된 백업을 선택하고 * 다음 * 을 클릭합니다.
+
image:anf-cba-image97.png["완료 중인 단계의 스크린샷."]

. 로그 백업 위치를 확인하고 * 다음 * 을 클릭합니다.
+
image:anf-cba-image98.png["완료 중인 단계의 스크린샷."]

. 필요에 따라 다른 설정을 선택합니다. Delta 백업 사용 * 이 선택되지 않았는지 확인합니다. 다음 * 을 클릭합니다.
+
image:anf-cba-image99.png["완료 중인 단계의 스크린샷."]

. 복구 설정을 검토하고 * Finish * 를 클릭하여 테넌트 데이터베이스의 복구 프로세스를 시작합니다.
+
image:anf-cba-image100.png["완료 중인 단계의 스크린샷."]

. 복구가 완료되고 테넌트 데이터베이스가 시작될 때까지 기다립니다.
+
image:anf-cba-image101.png["완료 중인 단계의 스크린샷."]

+
SAP HANA 시스템이 가동되어 실행 중입니다.

+

NOTE: 여러 테넌트가 있는 SAP HANA MDC 시스템의 경우 각 테넌트에 대해 16 ~ 25단계를 반복해야 합니다.



link:anf-cba-backup-operations-with-hana-system-replication.html["다음: HANA 시스템 복제를 사용한 백업 작업"]

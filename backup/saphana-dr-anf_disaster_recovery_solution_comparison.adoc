---
sidebar: sidebar 
permalink: backup/saphana-dr-anf_disaster_recovery_solution_comparison.html 
keywords: sap, hana, system, replication, data, memory, disaster, recovery, solutions, azure 
summary: 포괄적인 재해 복구 솔루션을 통해 고객은 운영 사이트의 전체 장애로부터 복구할 수 있어야 합니다. 
---
= 재해 복구 솔루션 비교
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../media/


[role="lead"]
포괄적인 재해 복구 솔루션을 통해 고객은 운영 사이트의 전체 장애로부터 복구할 수 있어야 합니다. 따라서 데이터를 2차 사이트로 전송해야 하며, 사이트 장애 발생 시 필요한 운영 SAP HANA 시스템을 실행하려면 완벽한 인프라가 필요합니다. 애플리케이션의 가용성 요구 사항과 보호하려는 재해 유형에 따라 2개 사이트 또는 3개 사이트 재해 복구 솔루션을 고려해야 합니다.

다음 그림에서는 동일한 Azure 지역 내에서 두 번째 가용성 영역으로 데이터가 동기식으로 복제되는 일반적인 구성을 보여 줍니다. 단거리 주행으로 데이터를 동기식으로 복제하여 RPO가 0이 되도록 할 수 있습니다(일반적으로 HA를 제공하는 데 사용됨).

또한 기본 영역이 영향을 받을 때 재해로부터 보호할 보조 영역에도 데이터가 비동기적으로 복제됩니다. 달성 가능한 최소 RPO는 운영 영역과 보조 영역 간의 사용 가능한 대역폭에 의해 제한되는 데이터 복제 빈도에 따라 달라집니다. 일반적인 최소 RPO는 20분에서 여러 시간 사이입니다.

이 문서에서는 2개 지역 재해 복구 솔루션의 다양한 구현 옵션에 대해 설명합니다.

image:saphana-dr-anf_image3.png["오류: 그래픽 이미지가 없습니다"]



== SAP HANA 시스템 복제

SAP HANA 시스템 복제는 데이터베이스 계층에서 작동합니다. 이 솔루션은 기본 시스템에서 변경 사항을 수신하는 재해 복구 사이트의 추가 SAP HANA 시스템을 기반으로 합니다. 이 보조 시스템은 운영 시스템과 동일해야 합니다.

SAP HANA 시스템 복제는 다음 두 가지 모드 중 하나로 작동할 수 있습니다.

* 데이터가 메모리에 사전 로드되어 있고 재해 복구 사이트의 전용 서버가 있는 경우:
+
** 이 서버는 SAP HANA 시스템 복제 보조 호스트로만 사용됩니다.
** 데이터가 이미 메모리에 로드되어 있고 장애 조치 시 데이터베이스를 시작할 필요가 없기 때문에 매우 낮은 RTO 값을 얻을 수 있습니다.


* 데이터가 재해 복구 사이트의 메모리와 공유 서버에 사전 로드되지 않은 경우:
+
** 이 서버는 SAP HANA 시스템 복제 보조 서버로, 개발/테스트 시스템으로 공유됩니다.
** RTO는 주로 데이터베이스를 시작하고 데이터를 메모리로 로드하는 데 필요한 시간에 따라 달라집니다.




모든 구성 옵션 및 복제 시나리오에 대한 자세한 내용은 를 참조하십시오 https://help.sap.com/saphelp_hanaplatform/helpdata/en/67/6844172c2442f0bf6c8b080db05ae7/content.htm?frameset=/en/52/08b5071e3f45d5aa3bcbb7fde10cec/frameset.htm&current_toc=/en/00/0ca1e3486640ef8b884cdf1a050fbb/plain.htm&node_id=527&show_children=f["SAP HANA 관리 가이드"^].

다음 그림에서는 SAP HANA 시스템 복제를 사용하는 2지역 재해 복구 솔루션을 설정하는 방법을 보여 줍니다. 메모리에 사전 로드된 데이터를 사용한 동기식 복제는 동일한 Azure 지역의 로컬 HA에 사용되지만 다른 가용성 존에서 사용됩니다. 데이터가 사전 로드되지 않은 비동기식 복제는 원격 재해 복구 영역에 대해 구성됩니다.

다음 그림에서는 SAP HANA 시스템 복제를 보여 줍니다.

image:saphana-dr-anf_image4.png["오류: 그래픽 이미지가 없습니다"]



=== 메모리에 사전 로드된 데이터로 SAP HANA 시스템 복제

SAP HANA의 RTO 가치는 메모리에 사전 로드된 데이터로 SAP HANA 시스템 복제를 통해서만 달성할 수 있습니다. 재해 복구 사이트의 전용 보조 서버에서 SAP HANA 시스템 복제를 실행하면 RTO 값이 약 1분 이하로 유지됩니다. 복제된 데이터가 수신되고 보조 시스템의 메모리에 사전 로드됩니다. 이렇게 낮은 페일오버 시간 덕분에 HANA 소프트웨어 업그레이드와 같이 다운타임이 거의 발생하지 않는 유지보수 작업에도 SAP HANA 시스템 복제가 사용되는 경우가 많습니다.

일반적으로 SAP HANA 시스템 복제는 데이터 사전 로드를 선택할 때 동기식으로 복제하도록 구성됩니다. 동기식 복제에 대해 지원되는 최대 거리는 100km 범위입니다.



=== 데이터가 메모리에 사전 로드되지 않은 SAP 시스템 복제

RTO 요구 사항이 비교적 엄격하지 않은 경우, 사전 로드된 데이터 없이 SAP HANA 시스템 복제를 사용할 수 있습니다. 이 운영 모드에서는 재해 복구 영역의 데이터가 메모리에 로드되지 않습니다. DR 지역의 서버는 여전히 필요한 모든 SAP HANA 프로세스를 실행하는 SAP HANA 시스템 복제를 처리하는 데 사용됩니다. 그러나 대부분의 서버 메모리는 SAP HANA 개발/테스트 시스템과 같은 다른 서비스를 실행하는 데 사용할 수 있습니다.

재해가 발생할 경우 개발/테스트 시스템을 종료하고 페일오버를 시작해야 하며 데이터를 메모리에 로드해야 합니다. 이 콜드 대기 방식의 RTO는 행 및 열 저장소를 로드하는 동안 데이터베이스의 크기와 읽기 처리량에 따라 달라집니다. 데이터가 1000Mbps의 처리량으로 읽혀지는 것을 가정하면 1TB의 데이터를 로드하는 데 약 18분이 걸립니다.



== ANF 교차 지역 복제를 통한 SAP HANA 재해 복구

ANF 교차 지역 복제는 비동기 데이터 복제를 사용하는 재해 복구 솔루션으로 ANF에 내장되어 있습니다. ANF 지역 간 복제는 운영 및 보조 Azure 영역에 있는 두 ANF 볼륨 간의 데이터 보호 관계를 통해 구성됩니다. ANF 지역 간 복제는 효율적인 블록 델타 복제를 사용하여 보조 볼륨을 업데이트합니다. 복제 구성 중에 업데이트 일정을 정의할 수 있습니다.

다음 그림에서는 ANF 지역 간 복제를 사용하는 2개 지역 재해 복구 솔루션의 예를 보여 줍니다. 이 예에서 HANA 시스템은 이전 장에서 설명한 대로 기본 영역 내의 HANA 시스템 복제로 보호됩니다. 보조 영역에 대한 복제는 ANF 교차 지역 복제를 사용하여 수행됩니다. RPO는 복제 스케줄 및 복제 옵션으로 정의됩니다.

RTO는 주로 재해 복구 사이트에서 HANA 데이터베이스를 시작하고 데이터를 메모리로 로드하는 데 걸리는 시간에 따라 달라집니다. 데이터가 1000MB/s의 처리량으로 읽혀지는 것으로 가정하면 1TB의 데이터를 로드하는 데 약 18분이 걸립니다. 복제 구성에 따라 정방향 복구도 필요하며 전체 RTO 값에 추가됩니다.

다양한 구성 옵션에 대한 자세한 내용은 장을 참조하십시오 link:ent-apps-db/saphana-dr-anf_anf_cross-region_replication_with_sap_hana_overview.html["SAP HANA를 통한 지역 간 복제를 위한 구성 옵션"].

재해 복구 사이트의 서버는 정상 운영 중에 개발/테스트 시스템으로 사용할 수 있습니다. 재해가 발생할 경우 개발/테스트 시스템을 종료하고 DR 운영 서버로 시작해야 합니다.

ANF 지역 간 복제를 사용하면 RPO 및 RTO에 영향을 주지 않고 DR 워크플로우를 테스트할 수 있습니다. 볼륨 클론을 생성하여 DR 테스트 서버에 연결하면 됩니다.

image:saphana-dr-anf_image5.png["오류: 그래픽 이미지가 없습니다"]



== 재해 복구 솔루션 요약

다음 표에서는 이 섹션에서 설명하는 재해 복구 솔루션을 비교하여 가장 중요한 지표를 보여 줍니다.

주요 결과는 다음과 같습니다.

* 매우 낮은 RTO가 필요한 경우 사전 로드를 통해 메모리에 SAP HANA 시스템 복제가 유일한 옵션입니다.
+
** 복제된 데이터를 수신하고 데이터를 메모리로 로드하려면 DR 사이트에 전용 서버가 필요합니다.


* 또한 데이터베이스 외부에 있는 데이터(예: 공유 파일, 인터페이스 등)에는 스토리지 복제가 필요합니다.
* RTO/RPO 요구 사항이 엄격하지 않은 경우 ANF 지역 간 복제를 사용하여 다음을 수행할 수도 있습니다.
+
** 데이터베이스 및 비데이터베이스 데이터 복제 결합
** 재해 복구 테스트, 개발/테스트 교체와 같은 추가 사용 사례를 다룹니다.
** 스토리지 복제를 사용하면 정상 운영 중에 DR 사이트의 서버를 QA 또는 테스트 시스템으로 사용할 수 있습니다.


* 장거리 스토리지 복제를 사용하는 RPO=0의 HA 솔루션으로 SAP HANA 시스템 복제를 함께 사용하면 여러 가지 요구 사항을 해결할 수 있습니다.


다음 표에서는 재해 복구 솔루션을 비교하여 보여 줍니다.

|===
|  | 스토리지 복제 2+| SAP HANA 시스템 복제 


|  | * 지역 간 복제 * | * 데이터 사전 로드 * | * 데이터 사전 로드 없음 * 


| RTO를 참조하십시오 | 데이터베이스 시작 시간 및 복구 전달 에 따라 낮음~중간 | 매우 낮음 | 데이터베이스 시작 시간에 따라 낮음~중간 


| RPO | RPO > 20분 비동기식 복제 | RPO > 20분 비동기식 복제 RPO = 0개의 동기식 복제 | RPO > 20분 비동기식 복제 RPO = 0개의 동기식 복제 


| DR 사이트의 서버를 개발/테스트에 사용할 수 있습니다 | 예 | 아니요 | 예 


| 비데이터베이스 데이터의 복제 | 예 | 아니요 | 아니요 


| DR 데이터를 개발/테스트 시스템의 업데이트에 사용할 수 있습니다 | 예 | 아니요 | 아니요 


| RTO 및 RPO에 영향을 주지 않는 DR 테스트 | 예 | 아니요 | 아니요 
|===